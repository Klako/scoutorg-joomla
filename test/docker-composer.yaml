version: '3.2'

services:
  joomla:
    build: './joomla/'
    environment:
      MYSQL_HOST: mysql
      MYSQL_USER: root
      MYSQL_PASSWORD: abc123
      MYSQL_DATABASE: joomla
    ports:
      - '8080:81'
    depends_on:
      - mysql
      - mockserver
    links:
      - mysql
      - mockserver
    volumes:
      - '../component/admin/:/var/www/projects/com_scoutorg/administrator/components/com_scoutorg/:ro'
      - '../component/site/:/var/www/projects/com_scoutorg/components/com_scoutorg/:ro'
      - '../component/admin/language/:/var/www/projects/com_scoutorg/administrator/language/:ro'
      - '../component/site/language/:/var/www/projects/com_scoutorg/language/:ro'
      - '../component/:/root/component/'
      - '../library/:/root/library/'
      - '../library/:/var/www/projects/lib_scoutorg/libraries/scoutorg/:ro'
  mysql:
    build: './mysql/'
    environment:
      MYSQL_ROOT_PASSWORD: abc123
    ports:
      - '3307:3306'
  mockserver:
    build: './mockserver/'
    environment:
      MOCKSERVER_GROUP_ID: 1
      MOCKSERVER_GROUP_KEY: abcdefghijklmnopqrstuvwxyz