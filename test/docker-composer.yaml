version: '3.2'

services:
  joomla:
    build: './joomla/'
    environment:
      JOOMLA_MYSQL_HOST: mysql
      JOOMLA_MYSQL_LOGIN: root:abc123
      JOOMLA_MYSQL_DATABASE: joomla
    ports:
      - '8080:81'
    depends_on:
      - mysql
      - mock-server
    links:
      - mysql
      - mock-server
    volumes:
      - '../component/admin/:/var/www/projects/com_scoutorg/administrator/components/com_scoutorg/:ro'
      - '../component/site/:/var/www/projects/com_scoutorg/components/com_scoutorg/:ro'
      - '../component/admin/language/:/var/www/projects/com_scoutorg/administrator/language/:ro'
      - '../component/site/language/:/var/www/projects/com_scoutorg/language/:ro'
      - '../component/:/root/component/'
  mysql:
    build: './mysql/'
    environment:
      MYSQL_ROOT_PASSWORD: abc123
    ports:
      - '3307:3306'
  mock-server:
    build: './mock-server/'
    environment:
      MOCKSERVER_GROUP_ID: 1
      MOCKSERVER_GROUP_KEY: abcdefghijklmnopqrstuvwxyz